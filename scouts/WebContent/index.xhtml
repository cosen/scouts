<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pm="http://primefaces.org/mobile" contentType="text/html">

	<pm:page title="Scouts">
		<f:facet name="meta">
			<meta name="viewport" content="width=device-width,user-scalable=yes"></meta>
		</f:facet>

		<!-- Index -->
		<pm:view swatch="b" id="index">
			<pm:header title="Scouts"></pm:header>

			<pm:content>
				<p:commandButton value="Novo Jogo" action="pm:novoJogo" />
				<p:commandButton value="Lista de Jogos" action="pm:listaDeJogos" />
				<p:commandButton value="Classificação" action="pm:classificacao" />
				<p:commandButton value="Lista de Times" action="pm:listaDeTimes" />
				<p:commandButton value="Sortear Times" action="pm:sortearTimes" />
				<p:commandButton value="Novo Jogador" action="pm:novoJogador" />
			</pm:content>
		</pm:view>

		<!-- Lista de Times -->
		<pm:view swatch="b" id="listaDeTimes">
			<pm:header title="Lista de Times">
				<p:commandButton value="Home" action="pm:index"
					icon="ui-icon-arrow-left" />
			</pm:header>

			<pm:content>
				<h:form>
					<p:dataList value="#{timeControlador.times}" var="time">
						<p:commandLink value="#{time}"
							action="#{timeControlador.detalhes}" update="@all">
							<f:param name="id" value="#{time.id}" />
						</p:commandLink>
					</p:dataList>
				</h:form>
			</pm:content>
		</pm:view>

		<!-- Time Detalhes -->
		<pm:view swatch="b" id="timeDetalhes">
			<pm:header title="#{timeControlador.time}">
				<p:commandButton value="Home" action="pm:index"
					icon="ui-icon-arrow-left" />
				<p:commandButton value="Times" action="pm:listaDeTimes"
					icon="ui-icon-arrow-left" />
			</pm:header>

			<pm:content>
				<h:form>
					<p:dataList value="#{timeControlador.time.jogadores}" var="jogador">
						<h:outputText value="#{jogador.nome}" />
					</p:dataList>
				</h:form>
			</pm:content>
		</pm:view>


		<!-- Prepara Remove Jogo -->
		<pm:view swatch="b" id="preparaRemoveJogo">
			<pm:header title="#{timeControlador.time}">
				<p:commandButton value="Home" action="pm:index"
					icon="ui-icon-arrow-left" />
				<p:commandButton value="Jogos" action="pm:listaDeJogos"
					icon="ui-icon-arrow-left" />
			</pm:header>

			<pm:content>
				<h:outputText value="Você realmente quer remover este Jogo?" />
				<p:commandButton value="Não" action="pm:listaDeJogos"/>
				<p:commandButton value="SIM" action="#{jogoControlador.remove}"
					update="@all">
					<f:param name="id" value="#{jogoControlador.jogo.id}" />
				</p:commandButton>
			</pm:content>
		</pm:view>


		<!-- Jogo Detalhes -->
		<pm:view swatch="b" id="jogoDetalhes">
			<pm:header title="Jogo Detalhes">
				<p:commandButton value="Home" action="pm:index"
					icon="ui-icon-arrow-left" />
			</pm:header>

			<pm:content>
				<h:form>
					<p:accordionPanel>
						<p:tab title="Placar">
							<h:outputLabel value="#{jogoControlador.jogo}" />
							<p:dataTable value="#{jogoControlador.jogo.gols}" var="gol"
								rendered="#{not empty jogoControlador.jogo.gols}">
								<f:facet name="header">
									<h:outputText value="Gols" />
								</f:facet>

								<p:column headerText="Jogador">
									<h:outputText value="#{gol.jogador.nome}" />
								</p:column>

								<p:column headerText="Time">
									<h:outputText value="#{gol.time.sigla}" />
								</p:column>
							</p:dataTable>

							<p:dataTable value="#{jogoControlador.jogo.assistencias}"
								var="assistencia"
								rendered="#{not empty jogoControlador.jogo.assistencias}">
								<f:facet name="header">
									<h:outputText value="Assistências" />
								</f:facet>

								<p:column headerText="Jogador">
									<h:outputText value="#{assistencia.jogador.nome}" />
								</p:column>

								<p:column headerText="Time">
									<h:outputText value="#{assistencia.time.sigla}" />
								</p:column>
							</p:dataTable>
						</p:tab>
						<p:tab title="Editar">
							<pm:field>
								<p:outputLabel value="Adicionar Gols:" />
								<p:selectManyCheckbox value="#{jogoControlador.gols}">
									<f:selectItems value="#{jogoControlador.jogo.time1.jogadores}"
										var="jogador"
										itemLabel="#{jogoControlador.jogo.time1.sigla} - #{jogador.nome}"
										itemValue="#{jogador.id}" />
									<f:selectItems value="#{jogoControlador.jogo.time2.jogadores}"
										var="jogador"
										itemLabel="#{jogoControlador.jogo.time2.sigla} - #{jogador.nome}"
										itemValue="#{jogador.id}" />
									<f:selectItem itemLabel="#{jogoControlador.jogo.time1.sigla}"
										itemValue="-1" />
									<f:selectItem itemLabel="#{jogoControlador.jogo.time2.sigla}"
										itemValue="-2" />
								</p:selectManyCheckbox>
							</pm:field>
							<pm:field>
								<p:outputLabel value="Adicionar Assistências:" />
								<p:selectManyCheckbox value="#{jogoControlador.assistencias}">
									<f:selectItems value="#{jogoControlador.jogo.time1.jogadores}"
										var="jogador"
										itemLabel="#{jogoControlador.jogo.time1.sigla} - #{jogador.nome}"
										itemValue="#{jogador.id}" />
									<f:selectItems value="#{jogoControlador.jogo.time2.jogadores}"
										var="jogador"
										itemLabel="#{jogoControlador.jogo.time2.sigla} - #{jogador.nome}"
										itemValue="#{jogador.id}" />
								</p:selectManyCheckbox>
							</pm:field>

						</p:tab>
					</p:accordionPanel>

					<p:commandButton value="Salvar" action="#{jogoControlador.salva}"
						update="@all">
						<f:param name="id" value="#{jogoControlador.jogo.id}" />
					</p:commandButton>

					<p:commandButton value="Remover"
						action="#{jogoControlador.preparaRemove}" update="@all">
						<f:param name="id" value="#{jogoControlador.jogo.id}" />
					</p:commandButton>
				</h:form>
			</pm:content>
		</pm:view>


		<!-- Classificação -->
		<pm:view swatch="b" id="classificacao">
			<pm:header title="Classificação">
				<p:commandButton value="Home" action="pm:index"
					icon="ui-icon-arrow-left" />
			</pm:header>

			<pm:content>
				<style>
.impar {
	background-color: #BBBBBB;
}

.tabela  table {
	width: 100%;
}

.tabela  table td {
	padding: 1%
}
</style>
				<h:form>
					<p:dataTable styleClass="tabela"
						value="#{classificacaoControlador.classificacao}"
						rowIndexVar="index" var="pontuacao" style="overflow: auto;"
						rowStyleClass="#{index % 2 != 0 ? 'impar' : null}">

						<p:column headerText="">
							<h:outputText value="#{index + 1}" />
						</p:column>
						<p:column headerText="Jogador">
							<h:outputText value="#{pontuacao.jogador.nome}" />
						</p:column>
						<p:column headerText="P">
							<h:outputText value="#{pontuacao.pontos}" />
						</p:column>
						<p:column headerText="J">
							<h:outputText value="#{pontuacao.jogos}" />
						</p:column>
						<p:column headerText="V">
							<h:outputText value="#{pontuacao.vitorias}" />
						</p:column>
						<p:column headerText="E">
							<h:outputText value="#{pontuacao.empates}" />
						</p:column>
						<p:column headerText="D">
							<h:outputText value="#{pontuacao.derrotas}" />
						</p:column>
						<p:column headerText="G">
							<h:outputText value="#{pontuacao.gols}" />
						</p:column>
						<p:column headerText="A">
							<h:outputText value="#{pontuacao.assistencias}" />
						</p:column>

					</p:dataTable>

					<pm:field>
						<p:outputLabel value="Início: " for="inicio" style="display:none" />
						<p:calendar id="inicio" pattern="dd/MM/yyyy"
							value="#{classificacaoControlador.inicio.time}" />
					</pm:field>

					<pm:field>
						<p:outputLabel value="Fim: " for="fim" style="display:none" />
						<p:calendar id="fim" pattern="dd/MM/yyyy"
							value="#{classificacaoControlador.fim.time}" />
					</pm:field>
					<p:commandButton value="Gerar"
						action="#{classificacaoControlador.gera}" update="@all" />
				</h:form>
			</pm:content>
		</pm:view>

		<!-- Lista de Jogos -->
		<pm:view swatch="b" id="listaDeJogos">
			<pm:header title="Lista de Jogos">
				<p:commandButton value="Home" action="pm:index"
					icon="ui-icon-arrow-left" />
			</pm:header>

			<pm:content>
				<h:form>
					<p:dataList value="#{jogoControlador.jogos}" var="jogo"
						style="overflow: hidden">
						<p:commandLink value="#{jogo}"
							action="#{jogoControlador.detalhes}" update="@all">
							<f:param name="id" value="#{jogo.id}" />
						</p:commandLink>
					</p:dataList>
				</h:form>
			</pm:content>
		</pm:view>

		<!-- Novo Jogo -->
		<pm:view swatch="b" id="novoJogo">
			<pm:header title="Novo Jogo">
				<p:commandButton value="Home" action="pm:index"
					icon="ui-icon-arrow-left" />
			</pm:header>

			<pm:content>
				<h:form>
					<pm:field>
						<p:outputLabel value="Time1:" />
						<h:selectOneMenu value="#{jogoControlador.time1}">
							<f:selectItems value="#{timeControlador.times}" var="time"
								itemLabel="#{time}" itemValue="#{time.id}" />
						</h:selectOneMenu>
					</pm:field>

					<pm:field>
						<p:outputLabel value="Time2:" />
						<h:selectOneMenu value="#{jogoControlador.time2}">
							<f:selectItems value="#{timeControlador.times}" var="time"
								itemLabel="#{time}" itemValue="#{time.id}" />
						</h:selectOneMenu>
					</pm:field>

					<p:commandButton value="Salvar"
						action="#{jogoControlador.novoJogo}" update="@all" />
				</h:form>
			</pm:content>
		</pm:view>

		<!-- Novo Jogador -->
		<pm:view swatch="b" id="novoJogador">
			<pm:header title="Novo Jogador">
				<p:commandButton value="Home" action="pm:index"
					icon="ui-icon-arrow-left" />
			</pm:header>

			<pm:content>
				<h:form>
					<pm:field>
						<p:outputLabel value="Nome:" for="jogador" style="display:none" />
						<p:inputText id="jogador"
							value="#{jogadorControlador.jogador.nome}" />
					</pm:field>

					<pm:field>
						<p:outputLabel value="Nota (0-10):" for="nota"
							style="display:none" />
						<p:inputText id="nota" value="#{jogadorControlador.jogador.nota}"
							type="number" />
					</pm:field>

					<p:commandButton action="#{jogadorControlador.salva}"
						value="Salvar" update="@all" />
				</h:form>

			</pm:content>
		</pm:view>

		<!-- Sortear Times -->
		<pm:view swatch="b" id="sortearTimes">
			<pm:header title="Sortear Times">
				<p:commandButton value="Home" action="pm:index"
					icon="ui-icon-arrow-left" />
			</pm:header>

			<pm:content>
				<h:form>
					<p:selectManyCheckbox id="pageDirection"
						value="#{scoutsControlador.selecionados}" layout="pageDirection">
						<f:selectItems value="#{jogadorControlador.jogadores}"
							var="jogador" itemLabel="#{jogador.nome}"
							itemValue="#{jogador.id}" />
					</p:selectManyCheckbox>
					<p:commandButton action="#{scoutsControlador.sorteia}"
						value="Sorteia" update="@all" />
				</h:form>
			</pm:content>
		</pm:view>

		<!-- Times Sorteados -->
		<pm:view swatch="b" id="timesSorteados">
			<pm:header title="Times Sorteados">
				<p:commandButton value="Home" action="pm:index"
					icon="ui-icon-arrow-left" />
			</pm:header>

			<pm:content>
				<h:form>
					<ui:repeat value="#{scoutsControlador.times}" var="time">
						#{time.sigla}
					</ui:repeat>

					<p:dataList value="#{scoutsControlador.times}" var="time"
						style="overflow: hidden">
						<h:outputText value="#{time.sigla}" />
						<p:dataList value="#{time.jogadores}" var="jogador"
							style="padding-top: 35px">
							<h:outputText value="#{jogador.nome}" style="padding-left: 35px" />
						</p:dataList>
					</p:dataList>
				</h:form>
			</pm:content>
		</pm:view>
	</pm:page>
</f:view>